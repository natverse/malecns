% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cosine.R
\name{mcns_cosine_plot}
\alias{mcns_cosine_plot}
\title{Cosine plot}
\usage{
mcns_cosine_plot(
  ids,
  partners = c("output", "input"),
  group = FALSE,
  groupfun = NULL,
  labRow = "{name}_{group}",
  metadata.source = c("neuprint", "clio"),
  action = NULL,
  ...
)
}
\arguments{
\item{ids}{Bodyids in any form understood by \code{\link{mcns_ids}}}

\item{partners}{Whether to cluster based on connections to input or output
partner neurons (default both).}

\item{group}{Optional character vector specifying the grouping column for the
partner neurons when constructing the cosine similarity matrix. \code{TRUE}
implies to \code{'group'}.}

\item{groupfun}{A function which receives the metadata for all partner
neurons and returns a single grouping vector (see the \bold{details}
section).}

\item{labRow}{A string interpolated by \code{\link{glue}} using the dataframe
of metadata fetched by \code{\link{mcns_neuprint_meta}}. Alternatively a
character vector with as many elements as \code{ids} directly specifying
the rows.}

\item{metadata.source}{Whether to use neuprint (\code{\link{mcns_neuprint_meta}}) and clio ()}

\item{action}{Whether to zero out or drop any NA values in the cosine matrix
(these may be present when some columns have no entries)}

\item{...}{additional arguments passed to \code{\link{neuprint_cosine_plot}}
and eventually to \code{heatmap}.}
}
\value{
The result of \code{\link{heatmap}} invisibly including the row and
  column dendrograms.
}
\description{
Cosine plot
}
\examples{
\donttest{
# cosine clustering based on grouped output partners (mainly DNs right now)
r=mcns_cosine_plot("/name:LAL.+", partners='out', group=TRUE)
}
\dontrun{
# fancier labelling of rows including soma side of neurons
r=mcns_cosine_plot("/name:LAL.+", partners='out', group=TRUE,
  labRow = '{name}_{group}_{mcns_soma_side(data.frame(bodyid, name, somaLocation))}')

r2=mcns_cosine_plot("/name:LAL.+", partners='out', group=TRUE,
  labRow = '{instance}_{group}_{soma_side}', metadata.source='clio')
}
}
