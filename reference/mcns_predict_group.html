<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Predict the group of neurons using instance or type information"><title>Predict the group of neurons using instance or type information — mcns_predict_group • malecns</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict the group of neurons using instance or type information — mcns_predict_group"><meta property="og:description" content="Predict the group of neurons using instance or type information"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">malecns</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/flyconnectome/malecns/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Predict the group of neurons using instance or type information</h1>
      <small class="dont-index">Source: <a href="https://github.com/flyconnectome/malecns/blob/HEAD/R/group.R" class="external-link"><code>R/group.R</code></a></small>
      <div class="d-none name"><code>mcns_predict_group.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Predict the group of neurons using instance or type information</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mcns_predict_group</span><span class="op">(</span></span>
<span>  <span class="va">ids</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"group"</span>, <span class="st">"instance"</span>, <span class="st">"type"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  badtypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">""</span>, <span class="st">"Lamina_R1-R6"</span>, <span class="st">"Descending"</span>, <span class="st">"KC"</span>, <span class="st">"ER"</span>, <span class="st">"LC"</span>, <span class="st">"PB"</span>,</span>
<span>    <span class="st">"Ascending Interneuron"</span>, <span class="st">"Delta"</span>, <span class="st">"P1_L candidate"</span>, <span class="st">"LT"</span>, <span class="st">"MeMe"</span>, <span class="st">"PFGs"</span>, <span class="st">"Mi"</span>, <span class="st">"VT"</span>,</span>
<span>    <span class="st">"ML"</span>, <span class="st">"EL"</span>, <span class="st">"FB"</span>, <span class="st">"Dm"</span>, <span class="st">"DNp"</span>, <span class="st">"FC"</span>, <span class="st">"OL"</span>, <span class="st">"T"</span>, <span class="st">"Y"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>ids</dt>
<dd><p>Body ids in any form understood by <code><a href="mcns_ids.html">mcns_ids</a></code>. If you
have a metadata dataframe as returned by <code><a href="mcns_neuprint_meta.html">mcns_neuprint_meta</a></code>
then this is ideal as that function is called under the hood.</p></dd>


<dt>method</dt>
<dd><p>A string specifying which of 3 methods to use to identify the
group. <code>"all"</code> means to return all 3, while <code>"auto"</code> (the
default) means to look at each method in turn successively filling in
missing group values.</p></dd>


<dt>badtypes</dt>
<dd><p>Values of the type column which should be ignored for the
purposes of defining cell type groups. This will be because they contain
bad values or because the types are too broad to be very useful.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>For <code>method="all"</code> a dataframe as returned by</p>
<p></p>
<p><code><a href="mcns_neuprint_meta.html">mcns_neuprint_meta</a></code> with additional columns</p>
<p></p>
<p><code>instance_group</code> and <code>type_group</code>. Otherwise a numeric vector.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Grouping information for neurons in the male cns is presently
  scattered in several locations. These include the numeric group field, the
  type field or the instance field. If the type field has the same value, the
  neurons should form a group. However there are some values</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:nat’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="co"># return all body ids with a group type or instance</span></span></span>
<span class="r-in"><span><span class="va">tig_ids</span><span class="op">=</span><span class="fu"><a href="mcns_ids.html">mcns_ids</a></span><span class="op">(</span><span class="st">'where:exists(n.group) OR exists(n.type) OR exists (n.instance)'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">allg</span><span class="op">=</span><span class="fu">mcns_predict_group</span><span class="op">(</span><span class="va">tig_ids</span>, method <span class="op">=</span> <span class="st">'all'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># neurons where the recorded group and instance group disagree</span></span></span>
<span class="r-in"><span><span class="va">allg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">instance_group</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">group</span><span class="op">!=</span><span class="va">instance_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bodyid  pre post upstream downstream synweight status           statusLabel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  11211 1051 5936     5936       6355     12291 Anchor        Primary Anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  11803  992 4404     4404       6047     10451 Anchor        Primary Anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  27083 1212 2047     2047      12146     14193 Anchor        Primary Anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 524150  944 4665     4665       8028     12693 Anchor        Primary Anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  13837  925 3952     3952       7840     11792 Anchor        Primary Anchor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  57240 1587 3064     3064      15160     18224 Traced Prelim Roughly traced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 513129  550 1626     1626       4704      6330 Traced Prelim Roughly traced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cropped    name           type      somaLocation nucleusVoxels     voxels</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   FALSE 11211_R           &lt;NA&gt; 45404,48928,28412     103840368 2286457771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   FALSE 11211_L           &lt;NA&gt; 52290,47120,31620     112753856 1915409289</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   FALSE 27083_L           &lt;NA&gt; 55314,20366,38448     106673824  991224730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   FALSE 13837_R           &lt;NA&gt; 47814,18265,35894     104159464 1706719281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   FALSE 13837_L           &lt;NA&gt; 52000,18403,35249      90686240 1390399523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   FALSE 57240_R           &lt;NA&gt;                NA            NA 1257798925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   FALSE 30391_L P1_L candidate 55388,14978,35062      82900288  629491986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   halfbrainBodyId class group neckLocation cellBodyFiber  soma instance_group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              NA  &lt;NA&gt; 11803           NA          &lt;NA&gt;  TRUE          11211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2              NA  &lt;NA&gt; 11803           NA          &lt;NA&gt;  TRUE          11211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3              NA  &lt;NA&gt; 12724           NA          &lt;NA&gt;  TRUE          27083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4              NA  &lt;NA&gt; 13165           NA          &lt;NA&gt;  TRUE          13837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5              NA  &lt;NA&gt; 13165           NA          &lt;NA&gt;  TRUE          13837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6              NA  &lt;NA&gt; 24136           NA          &lt;NA&gt; FALSE          57240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7              NA  &lt;NA&gt; 25542           NA          &lt;NA&gt;  TRUE          30391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   type_group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         NA</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># neurons where the recorded group and type group disagree</span></span></span>
<span class="r-in"><span><span class="va">type_group_mismatch</span> <span class="op">&lt;-</span> <span class="va">allg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">type_group</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">group</span><span class="op">!=</span><span class="va">type_group</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">allg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">type_group_mismatch</span><span class="op">$</span><span class="va">group</span> <span class="op">|</span> <span class="va">type_group</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">type_group_mismatch</span><span class="op">$</span><span class="va">type_group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">bodyid</span>, <span class="va">type</span>, <span class="va">name</span>, <span class="va">group</span>, <span class="va">type_group</span>, <span class="va">instance_group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">View</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

